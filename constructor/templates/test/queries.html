{% extends 'main.html' %}

{% block content %}
	<div class="ui grid">
		<div class="one wide column"></div>
		<div class="fourteen wide column">

			<h1 class="ui inverted black block header">
				Тест : "{{test.title}}"
			</h1>
			
			<div class="ui steps" data-testID = "{{test.id}}" id = 'settings'>
				<a class="ui step">
					<i class="setting icon"></i>
					<div class="content">
						<div class="title">
							Настройки
						</div>
					</div>	
				</a>
				<a class="ui active step">
					<i class="help icon"></i>
					<div class="content">
						<div class="title">
							Вопросы
						</div>
					</div>		
				</a>
			</div>

			<div class="ui segment">

				<div class="ui four cards">
				{% for item in queries %}
					<div class="card">
						<div class="image">
							<a class="like ui corner label" data-id = "{{item.query.id}}">
								<i class="remove icon"></i>
							</a>
						</div>
						<div class="content">
							<div class="name">
								Вопрос
							</div>
							{{item.query.text|slice:":20"}}...?
							{% include 'test/query_items.html' %}
							<a href = "edit/{{item.query.id}}/" class="ui button green fluid">
								Подробнее
							</a>
						</div>	
					</div>
				{% endfor %}
				<div class="red card">
					<div class="content">
						<div class="ui icon center aligned header">
							<i class="circular question icon"></i>Вопрос
						</div>
						<a href="add/" class="ui button fluid">Добавить</a>
					</div>	
				</div>
				</div>
			</div>	
		</div>
		<div class="one wide column"></div>
	</div>
{% endblock %}

{% block scripts %}
<script>
	$('.like.corner').on('click', function(){
		var queryID = $(this).attr('data-id');
		swal({
			title: 'Удалить вопрос',
			text: 'Вы точно хотите удалить данный вопрос?',
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: "#DD6B55",
			confirmButtonText: 'Да, удалить его!',
			cancelButtonText: 'Нет, не надо!',
			closeOnConfirm: false,   
			closeOnCancel: false
			},

			function(isConfirm){
				if(isConfirm){
					window.location.assign('delete/' + queryID + '/')
				}else{
					swal("Отмена", "Данный вопрос не будет удален :)", "error");
				}
			});
	});

	$('#settings').on('click', function(){
		testID = $(this).attr('data-testID');
		window.location.assign('/constructor/test/' + testID + '/settings/')
	})
</script>
{% endblock %}